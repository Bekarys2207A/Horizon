{% extends 'shop/base.html' %}

{% block content %}
<div class="container my-5">
    <div class="card shadow-lg border-0 rounded-4 mx-auto overflow-hidden" style="max-width: 800px;">
        {% if product.image %}
            <div class="bg-light d-flex align-items-center justify-content-center" style="height: 400px;">
                <img src="{{ product.image.url }}"
                     alt="{{ product.name }}"
                     class="img-fluid"
                     style="max-height: 100%; max-width: 100%; object-fit: contain;">
            </div>
        {% endif %}
        <div class="card-body p-5">
            <h2 class="card-title fw-bold mb-3 text-center" style="font-size: 2rem;">{{ product.name }}</h2>
            <hr>
            <p class="card-text fs-5 mb-2"><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ product.category.name }}</p>
            <p class="card-text fs-5 mb-2"><strong>–¶–µ–Ω–∞:</strong> <span style="color: #0d6efd;">{{ product.price }} ‚Ç∏</span></p>
            <p class="card-text fs-5"><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong></p>
            <p class="text-muted" style="font-size: 1.1rem;">{{ product.description }}</p>

            <div class="text-center mt-4 d-flex justify-content-center gap-3 flex-wrap">
                <form method="post" action="{% url 'add-to-cart' product.id %}" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-primary btn-lg px-4 py-2 rounded-pill">
                        üõí –í –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                </form>
                <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
                <button class="btn btn-success btn-lg px-4 py-2 rounded-pill" data-bs-toggle="modal" data-bs-target="#orderModal">
                    –ö—É–ø–∏—Ç—å
                </button>
                <a href="{% url 'home' %}" class="btn btn-lg btn-gradient px-5 py-2 rounded-pill"
                   style="background: linear-gradient(90deg, #0d6efd, #6610f2); color: white; font-weight: 500;">
                    ‚¨Ö –ù–∞–∑–∞–¥ –∫–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º
                </a>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
<div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="post" action="{% url 'make-order' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="orderModalLabel">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input type="text" class="form-control" id="phone" name="phone" required>
          </div>
          <div class="mb-3">
            <label for="country" class="form-label">–°—Ç—Ä–∞–Ω–∞</label>
            <input type="text" class="form-control" id="country" name="country" required>
          </div>
          <div class="mb-3">
            <label for="address" class="form-label">–ê–¥—Ä–µ—Å</label>
            <input type="text" class="form-control" id="address" name="address" required>
          </div>
          <div class="mb-3">
            <label class="form-label">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
            <select class="form-select" name="payment_method" required>
              <option value="card">–ö–∞—Ä—Ç–æ–π</option>
              <option value="cash">–ù–∞–ª–∏—á–Ω—ã–º–∏</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn btn-primary">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
    .btn-gradient:hover {
        background: linear-gradient(90deg, #6610f2, #0d6efd);
        color: white;
    }
    .card:hover img {
        transform: scale(1.03);
        transition: transform 0.3s ease;
    }
</style>
{% endblock %}